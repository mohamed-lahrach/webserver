<!DOCTYPE html>
<html>
<head>
    <title>Simple CGI Tests</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .test { background: #f5f5f5; padding: 20px; margin: 20px 0; border: 1px solid #ddd; }
        button, input { padding: 8px; margin: 5px; }
        textarea { width: 100%; height: 80px; }
    </style>
</head>
<body>
    <h1>Simple CGI Tests</h1>
    
    <!-- GET Tests -->
    <div class="test">
        <h2>GET Tests</h2>
        <a href="/cgi-bin/hello.py" target="_blank">Test Basic CGI</a><br>
        <a href="/cgi-bin/test.py" target="_blank">Test Simple Script</a><br>
        <a href="/cgi-bin/nonexistent.py" target="_blank">Test 404 Error</a>
    </div>
    
    <!-- POST Tests -->
    <div class="test">
        <h2>POST Tests</h2>
        <form action="/cgi-bin/post_test.py" method="POST" target="_blank">
            <input type="text" name="name" placeholder="Your name" value="test"><br>
            <textarea name="message" placeholder="Your message">Hello from POST test</textarea><br>
            <button type="submit">Send POST</button>
        </form>
    </div>
    
    <!-- File Upload -->
    <div class="test">
        <h2>File Upload Test</h2>
        <input type="file" id="fileInput"><br>
        <button onclick="uploadFile()">Upload File</button>
    </div>
    
    <!-- Error Tests -->
    <div class="test">
        <h2>Error Tests</h2>
        <button onclick="testError('syntax')">Test Syntax Error</button>
        <button onclick="testError('infinite')">Test Infinite Loop</button>
    </div>
    
    <!-- Manual Commands -->
    <div class="test">
        <h2>Manual Test Commands</h2>
        <pre>
# Basic GET test
curl http://localhost:3080/cgi-bin/hello.py

# POST test
curl -X POST -d "name=test&message=hello" http://localhost:3080/cgi-bin/post_test.py

# File upload test
curl -X POST --data-binary @file.txt http://localhost:3080/cgi-bin/post_test.py
        </pre>
    </div>

    <script>
        function uploadFile() {
            const file = document.getElementById('fileInput').files[0];
            if (!file) {
                alert('Select a file first');
                return;
            }
            
            fetch('/cgi-bin/post_test.py', {
                method: 'POST',
                body: file
            })
            .then(response => response.text())
            .then(html => {
                const newWindow = window.open('', '_blank');
                newWindow.document.write(html);
            });
        }
        
        function testError(type) {
            let url = '/cgi-bin/';
            if (type === 'syntax') {
                url += 'syntax_error.py';
            } else if (type === 'infinite') {
                url += 'infinite_loop.py';
            }
            window.open(url, '_blank');
        }
    </script>
</body>
</html>