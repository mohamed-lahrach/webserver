<!DOCTYPE html>
<html>
<head>
    <title>CGI POST Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .test-form { background: #f5f5f5; padding: 20px; margin: 20px 0; border: 1px solid #ddd; }
        textarea { width: 100%; height: 100px; }
        input, button { margin: 5px 0; padding: 5px; }
        .result { background: #e8f5e8; padding: 15px; margin: 10px 0; border: 1px solid #4CAF50; }
    </style>
</head>
<body>
    <h1>CGI POST Testing</h1>
    
    <div class="test-form">
        <h2>Test 1: Simple Form Data</h2>
        <form action="/cgi-bin/post_test.py" method="POST">
            <label>Name: <input type="text" name="username" value="testuser"></label><br>
            <label>Email: <input type="email" name="email" value="test@example.com"></label><br>
            <label>Message: <textarea name="message">Hello from CGI POST test!</textarea></label><br>
            <button type="submit">Submit Form Data</button>
        </form>
    </div>
    
    <div class="test-form">
        <h2>Test 2: JSON Data</h2>
        <form action="/cgi-bin/post_test.py" method="POST" enctype="application/json">
            <textarea name="json_data">{"name": "John", "age": 30, "city": "New York"}</textarea><br>
            <button type="submit">Submit JSON Data</button>
        </form>
    </div>
    
    <div class="test-form">
        <h2>Test 3: Large Text Data</h2>
        <form action="/cgi-bin/post_test.py" method="POST">
            <textarea name="large_text">This is a test of larger POST data. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</textarea><br>
            <button type="submit">Submit Large Text</button>
        </form>
    </div>
    
    <div class="test-form">
        <h2>Manual Testing Instructions</h2>
        <h3>Using curl commands:</h3>
        <pre>
# Test 1: Simple POST data
curl -X POST http://localhost:3080/cgi-bin/post_test.py \
     -d "username=testuser&email=test@example.com&message=hello"

# Test 2: JSON POST data  
curl -X POST http://localhost:3080/cgi-bin/post_test.py \
     -H "Content-Type: application/json" \
     -d '{"name": "John", "age": 30, "city": "New York"}'

# Test 3: Chunked transfer encoding
curl -X POST http://localhost:3080/cgi-bin/post_test.py \
     -H "Transfer-Encoding: chunked" \
     -d "This is chunked data test"

# Test 4: Large POST data (1KB)
curl -X POST http://localhost:3080/cgi-bin/post_test.py \
     -d "$(python3 -c 'print("x" * 1024)')"
        </pre>
    </div>
    
    <div class="result">
        <h3>What to Look For:</h3>
        <ul>
            <li><strong>Console Output:</strong> Check server logs for "CGI POST REQUEST DETECTED"</li>
            <li><strong>Body Collection:</strong> Look for "CGI POST: Received complete body" messages</li>
            <li><strong>CGI Execution:</strong> The Python script should receive and display the POST data</li>
            <li><strong>Response:</strong> You should see the POST data echoed back in the HTML response</li>
        </ul>
    </div>
</body>
</html>
