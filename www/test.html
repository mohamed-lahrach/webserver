<!DOCTYPE html>
<html>
<head>
    <title>Simple Webserver Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        button { padding: 10px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 4px; }
        input, textarea { padding: 8px; margin: 10px 0; width: 300px; }
        .result { padding: 10px; margin: 10px 0; border: 1px solid #ccc; background: #f9f9f9; }
    </style>
</head>
<body>
    <h1>Webserver Test</h1>

    <!-- GET Test -->
    <h2>GET Test</h2>
    <button onclick="testGet()">Test GET /</button>
    <div id="get-result" class="result" style="display:none;"></div>

    <!-- POST Test -->
    <h2>POST Test</h2>
    <input type="file" id="fileInput">
    <button onclick="testPost()">Upload File</button>
    <div id="post-result" class="result" style="display:none;"></div>

    <!-- DELETE Test -->
    <h2>DELETE Test</h2>
    <input type="text" id="deleteFile" placeholder="filename to delete" value="test.txt">
    <button onclick="testDelete()">Delete File</button>
    <div id="delete-result" class="result" style="display:none;"></div>

    <script>
        function testGet() {
            document.getElementById('get-result').style.display = 'block';
            document.getElementById('get-result').innerHTML = 'Testing GET...';
            
            fetch('/')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('get-result').innerHTML = 'GET Success: ' + data.substring(0, 100) + '...';
                })
                .catch(error => {
                    document.getElementById('get-result').innerHTML = 'GET Error: ' + error;
                });
        }

        function testPost() {
            const file = document.getElementById('fileInput').files[0];
            if (!file) {
                alert('Please select a file');
                return;
            }

            document.getElementById('post-result').style.display = 'block';
            document.getElementById('post-result').innerHTML = 'Uploading...';

            const formData = new FormData();
            formData.append('file', file);

            fetch('/upload', {
                method: 'POST',
                body: formData
            })
            .then(response => response.text())
            .then(data => {
                document.getElementById('post-result').innerHTML = 'Upload Success: ' + data;
            })
            .catch(error => {
                document.getElementById('post-result').innerHTML = 'Upload Error: ' + error;
            });
        }

        function testDelete() {
            const filename = document.getElementById('deleteFile').value;
            if (!filename) {
                alert('Please enter filename');
                return;
            }

            document.getElementById('delete-result').style.display = 'block';
            document.getElementById('delete-result').innerHTML = 'Deleting...';

            fetch('/upload/' + filename, {
                method: 'DELETE'
            })
            .then(response => response.text())
            .then(data => {
                document.getElementById('delete-result').innerHTML = 'Delete Success: ' + data;
            })
            .catch(error => {
                document.getElementById('delete-result').innerHTML = 'Delete Error: ' + error;
            });
        }
    </script>
</body>
</html>
